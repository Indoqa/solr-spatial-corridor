import static com.indoqa.solr.spatial.corridor.CorridorConstants.WGS84_TO_KILOMETERS_FACTOR;
import static org.geotools.referencing.crs.DefaultGeographicCRS.WGS84;

import org.geotools.geometry.jts.JTS;
import org.geotools.referencing.CRS;
import org.geotools.referencing.crs.DefaultGeographicCRS;
import org.opengis.geometry.MismatchedDimensionException;
import org.opengis.referencing.FactoryException;
import org.opengis.referencing.NoSuchAuthorityCodeException;
import org.opengis.referencing.crs.CoordinateReferenceSystem;
import org.opengis.referencing.operation.MathTransform;
import org.opengis.referencing.operation.TransformException;

import com.vividsolutions.jts.geom.LineString;
import com.vividsolutions.jts.io.ParseException;
import com.vividsolutions.jts.io.WKTReader;

public class Test {

    public static void main(String[] args)
            throws ParseException, NoSuchAuthorityCodeException, FactoryException, MismatchedDimensionException, TransformException {
        LineString lineString = ((LineString) new WKTReader().read(
            "LINESTRING(16.37039615861895 48.20057128552842, 16.358677998093828 48.19719643770264, 16.339207685325686 48.188545501731866, 16.31468318513228 48.18773608789617, 16.28094963169427 48.192208688939225, 16.234409738587978 48.20215373085482, 16.202663685899047 48.192928105744365, 16.118792952931063 48.176229037710065, 16.05547171865833 48.174675777854695, 16.00287039792814 48.16261392358956, 15.956546342007266 48.1581747350957, 15.892793433363689 48.15641095087734, 15.842278538759231 48.174675777854695, 15.775530889167944 48.184192503513145, 15.686345165508984 48.18597931610878, 15.602870134047608 48.17764432232027, 15.495167378522781 48.168186360985565, 15.413805752835314 48.187796044914975, 15.360215178338615 48.2114915604275, 15.292954915431954 48.21529692688089, 15.2167464025464 48.194978388226005, 15.173147291091462 48.16939794108454, 15.10442113396715 48.15644094771444, 15.016008826889282 48.129106559353026, 14.938883005965689 48.138547720191916, 14.859382976002474 48.14532891942661, 14.815352190176693 48.12345183539512, 14.7294130175151 48.11643358933282, 14.66820518901627 48.11368966872983, 14.603022359019281 48.129886886383865, 14.552939138785668 48.16368167107552, 14.503845172318565 48.19953427779773, 14.447008046824498 48.20659510600586, 14.382220918334115 48.230743210764594, 14.311021626793528 48.22714269001627, 14.254058596274636 48.20108678445015, 14.188093356480499 48.18073262554532, 14.129016920187697 48.134910708036955, 14.068843311535675 48.09020724613777, 14.015171798094444 48.04982965823674, 13.966383600973352 48.02515724735151, 13.883421182827352 48.002994325698566, 13.806646097330066 48.00129140541656, 13.763649531351092 47.96785344316313, 13.712918799561217 47.950617364425305, 13.637528669337051 47.95522505549335, 13.576024064708268 47.95820628372306, 13.513170477670608 47.93305618777292, 13.456252413232011 47.91328896559243, 13.438607723323887 47.85864275504287, 13.407760992240874 47.837392313087314, 13.359368496626388 47.85431612024303, 13.329645917550772 47.85359196199495, 13.266459581518923 47.84389933740022, 13.204559275383538 47.85602992114098, 13.11502281629827 47.85400231957718, 13.07371697493842 47.83611857923829, 13.056503959401136 47.83048600687485, 13.053823981015498 47.81421874913894, 13.041539247878648 47.808118723250246)"));

        CoordinateReferenceSystem auto = CRS.decode("AUTO:42001,16.37039615861895, 48.20057128552842");
        System.out.println(auto);

        DefaultGeographicCRS wgs84 = WGS84;
        System.out.println(wgs84);

        MathTransform transform = CRS.findMathTransform(wgs84, auto);

        System.out.println(transform);

        LineString transformed = (LineString) JTS.transform(lineString, transform);

        System.out.println();
        System.out.println(lineString.getLength() * WGS84_TO_KILOMETERS_FACTOR);
        System.out.println(transformed.getLength() / 1000);

    }

}
